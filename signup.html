<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <title>Sign Up â€“ CustomPC.tech</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="icon" type="image/png" sizes="32x32" href="images/logo.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="images/logo.png" />
  <link rel="shortcut icon" href="images/logo.png" />
  <link rel="apple-touch-icon" href="images/logo.png" />
  <link rel="stylesheet" href="auth-styles.css">
</head>

<body class="auth-page">
  <div class="auth-container">
    <div class="auth-card">
      <h2>Sign Up</h2>
      <form id="signup-form" class="auth-form">
        <input 
          id="username" 
          type="text" 
          class="auth-input" 
          placeholder="Username" 
          required 
          aria-label="Username"
          autocomplete="username"
        />
        <input 
          id="email" 
          type="email" 
          class="auth-input" 
          placeholder="Email" 
          required 
          aria-label="Email"
          autocomplete="email"
        />
        <input 
          id="password" 
          type="password" 
          class="auth-input" 
          placeholder="Password" 
          required 
          aria-label="Password"
          autocomplete="new-password"
        />
        <input 
          id="confirm-password" 
          type="password" 
          class="auth-input" 
          placeholder="Confirm Password" 
          required 
          aria-label="Confirm Password"
          autocomplete="new-password"
        />
        
        <div class="error-message" id="error-display" role="alert" aria-live="polite"></div>
        <div class="success-message" id="success-display" role="alert" aria-live="polite"></div>
        
        <button type="submit" class="gradient-btn">Create Account</button>
        
        <div class="auth-links">
          <p class="switch-text">Already have an account? <a href="login.html">Log In</a></p>
        </div>
      </form>
    </div>
  </div>

  <script>
    // Signup form validation and submission
    document.addEventListener('DOMContentLoaded', function() {
      const form = document.getElementById('signup-form');
      const usernameInput = document.getElementById('username');
      const emailInput = document.getElementById('email');
      const passwordInput = document.getElementById('password');
      const confirmPasswordInput = document.getElementById('confirm-password');
      const errorDisplay = document.getElementById('error-display');
      const successDisplay = document.getElementById('success-display');
      const submitButton = form.querySelector('.gradient-btn');

      // Clear messages function
      function clearMessages() {
        errorDisplay.classList.remove('show');
        successDisplay.classList.remove('show');
        errorDisplay.textContent = '';
        successDisplay.textContent = '';
      }

      // Show error message
      function showError(message) {
        clearMessages();
        errorDisplay.textContent = message;
        errorDisplay.classList.add('show');
      }

      // Show success message
      function showSuccess(message) {
        clearMessages();
        successDisplay.textContent = message;
        successDisplay.classList.add('show');
      }

      // Validate username
      function validateUsername(username) {
        if (!username) return 'Username is required';
        if (username.length < 3) return 'Username must be at least 3 characters';
        if (username.length > 20) return 'Username must be less than 20 characters';
        if (!/^[a-zA-Z0-9_]+$/.test(username)) return 'Username can only contain letters, numbers, and underscores';
        return null;
      }

      // Validate email
      function validateEmail(email) {
        if (!email) return 'Email is required';
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailRegex.test(email)) return 'Please enter a valid email address';
        return null;
      }

      // Validate password
      function validatePassword(password) {
        if (!password) return 'Password is required';
        if (password.length < 8) return 'Password must be at least 8 characters';
        if (!/(?=.*[a-z])/.test(password)) return 'Password must contain at least one lowercase letter';
        if (!/(?=.*[A-Z])/.test(password)) return 'Password must contain at least one uppercase letter';
        if (!/(?=.*\d)/.test(password)) return 'Password must contain at least one number';
        return null;
      }

      // Validate confirm password
      function validateConfirmPassword(password, confirmPassword) {
        if (!confirmPassword) return 'Please confirm your password';
        if (password !== confirmPassword) return 'Passwords do not match';
        return null;
      }

      // Real-time validation on blur
      usernameInput.addEventListener('blur', function() {
        const error = validateUsername(this.value.trim());
        if (error) {
          this.classList.add('error');
          showError(error);
        } else {
          this.classList.remove('error');
          clearMessages();
        }
      });

      emailInput.addEventListener('blur', function() {
        const error = validateEmail(this.value.trim());
        if (error) {
          this.classList.add('error');
          showError(error);
        } else {
          this.classList.remove('error');
          clearMessages();
        }
      });

      passwordInput.addEventListener('blur', function() {
        const error = validatePassword(this.value);
        if (error) {
          this.classList.add('error');
          showError(error);
        } else {
          this.classList.remove('error');
          clearMessages();
        }
      });

      confirmPasswordInput.addEventListener('blur', function() {
        const error = validateConfirmPassword(passwordInput.value, this.value);
        if (error) {
          this.classList.add('error');
          showError(error);
        } else {
          this.classList.remove('error');
          clearMessages();
        }
      });

      // Clear error state on input
      [usernameInput, emailInput, passwordInput, confirmPasswordInput].forEach(input => {
        input.addEventListener('input', function() {
          this.classList.remove('error');
        });
      });

      // Form submission
      form.addEventListener('submit', async function(e) {
        e.preventDefault();
        clearMessages();

        const username = usernameInput.value.trim();
        const email = emailInput.value.trim();
        const password = passwordInput.value;
        const confirmPassword = confirmPasswordInput.value;

        // Validate all fields
        const usernameError = validateUsername(username);
        const emailError = validateEmail(email);
        const passwordError = validatePassword(password);
        const confirmPasswordError = validateConfirmPassword(password, confirmPassword);

        // Show first error found
        if (usernameError) {
          usernameInput.classList.add('error');
          showError(usernameError);
          usernameInput.focus();
          return;
        }

        if (emailError) {
          emailInput.classList.add('error');
          showError(emailError);
          emailInput.focus();
          return;
        }

        if (passwordError) {
          passwordInput.classList.add('error');
          showError(passwordError);
          passwordInput.focus();
          return;
        }

        if (confirmPasswordError) {
          confirmPasswordInput.classList.add('error');
          showError(confirmPasswordError);
          confirmPasswordInput.focus();
          return;
        }

        // Show loading state
        submitButton.classList.add('loading');
        submitButton.disabled = true;

        try {
          // Simulate signup process (replace with actual registration)
          await new Promise(resolve => setTimeout(resolve, 2000));
          
          // For demo purposes, accept any valid data
          if (username && email && password && confirmPassword) {
            // Store user data (simple localStorage for demo)
            const userData = {
              username: username,
              email: email,
              signupTime: new Date().toISOString()
            };
            
            localStorage.setItem('custompc_user', JSON.stringify(userData));
            
            showSuccess('Account created successfully! Redirecting to login...');
            
            // Redirect to login page after short delay
            setTimeout(() => {
              window.location.href = 'login.html';
            }, 2000);
          } else {
            throw new Error('Registration failed');
          }
        } catch (error) {
          showError('Registration failed. Please try again.');
        } finally {
          // Remove loading state
          submitButton.classList.remove('loading');
          submitButton.disabled = false;
        }
      });
    });
  </script>
</body>

</html>
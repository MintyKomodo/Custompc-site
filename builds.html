<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Builds – CustomPC.tech</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
</head>
<body onload="showBuilds('amd')">
  <nav>
    <a href="index.html">Contact</a>
    <a href="about.html">About</a>
    <a href="builds.html">Builds</a>
    <a href="cart.html">Cart</a>
    <span id="nav-user" class="hidden"></span>
    <a id="nav-login" href="login.html">Log In</a>
    <a id="nav-signup" href="signup.html">Sign Up</a>
    <a id="nav-logout" class="hidden" href="javascript:void(0)">Log Out</a>
  </nav>

  <div class="container">
    <h1>Custom PC Builds</h1>

    <div style="display:flex; justify-content:center; gap:10px; margin:10px 0 20px;">
      <button id="btn-amd" class="btn" onclick="showBuilds('amd')">AMD Builds</button>
      <button id="btn-intel" class="btn" onclick="showBuilds('intel')">Intel Builds</button>
    </div>

    <!-- ================= AMD ================= -->
    <div id="amd-builds" class="product-grid">
      <div class="card">
        <img src="https://images.pexels.com/photos/7915355/pexels-photo-7915355.jpeg?auto=compress&cs=tinysrgb&w=1200" alt="AMD 4K Gaming" onerror="imgFallback(this)">
        <div class="content">
          <span class="tag">4K Gaming</span>
          <h3>4K Gaming PC (AMD)</h3>
          <p class="desc">Ryzen 7 7800X3D • RTX 5080 • 32GB • 2TB NVMe</p>
          <div class="row"><div class="price">$2,599</div><button class="btn" onclick="addToCart('4K Gaming PC (AMD)', 2599)">Add</button></div>
        </div>
      </div>

      <div class="card">
        <img src="https://images.pexels.com/photos/5553050/pexels-photo-5553050.jpeg?auto=compress&cs=tinysrgb&w=1200" alt="AMD Overkill" onerror="imgFallback(this)">
        <div class="content">
          <span class="tag">Extreme</span>
          <h3>Overkill PC (AMD)</h3>
          <p class="desc">Ryzen 9 7950X • RTX 5090 • 64GB • 2TB+4TB</p>
          <div class="row"><div class="price">$4,499</div><button class="btn" onclick="addToCart('Overkill PC (AMD)', 4499)">Add</button></div>
        </div>
      </div>

      <div class="card">
        <img src="https://images.pexels.com/photos/5777692/pexels-photo-5777692.jpeg?auto=compress&cs=tinysrgb&w=1200" alt="AMD Creator" onerror="imgFallback(this)">
        <div class="content">
          <span class="tag">Creator</span>
          <h3>Creator Pro (AMD)</h3>
          <p class="desc">Ryzen 9 7950X • RTX 5080 • 64GB • 2TB 990 PRO</p>
          <div class="row"><div class="price">$2,999</div><button class="btn" onclick="addToCart('Creator Pro (AMD)', 2999)">Add</button></div>
        </div>
      </div>

      <!-- Extra AMD builds you added -->
      <div class="card">
        <img src="https://images.pexels.com/photos/1148820/pexels-photo-1148820.jpeg?auto=compress&cs=tinysrgb&w=1200" alt="Budget Gaming (AMD)" onerror="imgFallback(this)">
        <div class="content">
          <span class="tag">Best Value</span>
          <h3>Budget Gaming (AMD)</h3>
          <p class="desc">Ryzen 5 5600 • RTX 4060 • 16GB • 1TB SSD</p>
          <div class="row"><div class="price">$899</div><button class="btn" onclick="addToCart('Budget Gaming (AMD)', 899)">Add</button></div>
        </div>
      </div>

      <div class="card">
        <img src="https://images.pexels.com/photos/97077/pexels-photo-97077.jpeg?auto=compress&cs=tinysrgb&w=1200" alt="Budget Creator (AMD)" onerror="imgFallback(this)">
        <div class="content">
          <span class="tag">Creator</span>
          <h3>Budget Creator (AMD)</h3>
          <p class="desc">Ryzen 5 5600G • RTX 3050 • 16GB • 512GB SSD</p>
          <div class="row"><div class="price">$699</div><button class="btn" onclick="addToCart('Budget Creator (AMD)', 699)">Add</button></div>
        </div>
      </div>

      <div class="card">
        <img src="https://images.pexels.com/photos/8166086/pexels-photo-8166086.jpeg?auto=compress&cs=tinysrgb&w=1200" alt="Esports Pro (AMD)" onerror="imgFallback(this)">
        <div class="content">
          <span class="tag">Esports</span>
          <h3>Esports Pro (AMD)</h3>
          <p class="desc">Ryzen 5 7600 • RTX 4060 • 16GB • 1TB SSD</p>
          <div class="row"><div class="price">$999</div><button class="btn" onclick="addToCart('Esports Pro (AMD)', 999)">Add</button></div>
        </div>
      </div>
    </div>

    <!-- ================= INTEL ================= -->
    <div id="intel-builds" class="product-grid" style="display:none;">
      <div class="card">
        <img src="https://images.pexels.com/photos/3861956/pexels-photo-3861956.jpeg?auto=compress&cs=tinysrgb&w=1200" alt="Intel 4K Gaming" onerror="imgFallback(this)">
        <div class="content">
          <span class="tag">4K Gaming</span>
          <h3>4K Gaming PC (Intel)</h3>
          <p class="desc">i7-14700K • RTX 5080 • 32GB • 2TB NVMe</p>
          <div class="row"><div class="price">$2,699</div><button class="btn" onclick="addToCart('4K Gaming PC (Intel)', 2699)">Add</button></div>
        </div>
      </div>

      <div class="card">
        <img src="https://images.pexels.com/photos/907173/pexels-photo-907173.jpeg?auto=compress&cs=tinysrgb&w=1200" alt="Intel Overkill" onerror="imgFallback(this)">
        <div class="content">
          <span class="tag">Extreme</span>
          <h3>Overkill PC (Intel)</h3>
          <p class="desc">i9-14900K • RTX 5090 • 64GB • 2TB+4TB</p>
          <div class="row"><div class="price">$4,599</div><button class="btn" onclick="addToCart('Overkill PC (Intel)', 4599)">Add</button></div>
        </div>
      </div>

      <div class="card">
        <img src="https://images.pexels.com/photos/218863/pexels-photo-218863.jpeg?auto=compress&cs=tinysrgb&w=1200" alt="Intel Creator" onerror="imgFallback(this)">
        <div class="content">
          <span class="tag">Creator</span>
          <h3>Creator Pro (Intel)</h3>
          <p class="desc">i9-14900K • RTX 5080 • 64GB • 2TB 990 PRO</p>
          <div class="row"><div class="price">$3,099</div><button class="btn" onclick="addToCart('Creator Pro (Intel)', 3099)">Add</button></div>
        </div>
      </div>

      <!-- Extra Intel builds you added -->
      <div class="card">
        <img src="https://images.pexels.com/photos/538062/pexels-photo-538062.jpeg?auto=compress&cs=tinysrgb&w=1200" alt="Budget Gaming (Intel)" onerror="imgFallback(this)">
        <div class="content">
          <span class="tag">Best Value</span>
          <h3>Budget Gaming (Intel)</h3>
          <p class="desc">i5-12400F • RTX 4060 • 16GB • 1TB SSD</p>
          <div class="row"><div class="price">$929</div><button class="btn" onclick="addToCart('Budget Gaming (Intel)', 929)">Add</button></div>
        </div>
      </div>

      <div class="card">
        <img src="https://images.pexels.com/photos/1144176/pexels-photo-1144176.jpeg?auto=compress&cs=tinysrgb&w=1200" alt="Budget Creator (Intel)" onerror="imgFallback(this)">
        <div class="content">
          <span class="tag">Creator</span>
          <h3>Budget Creator (Intel)</h3>
          <p class="desc">i5-13400F • RTX 3050 • 16GB • 512GB SSD</p>
          <div class="row"><div class="price">$719</div><button class="btn" onclick="addToCart('Budget Creator (Intel)', 719)">Add</button></div>
        </div>
      </div>

      <div class="card">
        <img src="https://images.pexels.com/photos/1800205/pexels-photo-1800205.jpeg?auto=compress&cs=tinysrgb&w=1200" alt="Esports Pro (Intel)" onerror="imgFallback(this)">
        <div class="content">
          <span class="tag">Esports</span>
          <h3>Esports Pro (Intel)</h3>
          <p class="desc">i5-14500 • RTX 4060 • 16GB • 1TB SSD</p>
          <div class="row"><div class="price">$1,049</div><button class="btn" onclick="addToCart('Esports Pro (Intel)', 1049)">Add</button></div>
        </div>
      </div>
    </div>
  </div>

<script>
  async function syncLocalToCloud(){
    if (!(window.isLoggedIn && window.currentUser && window.__cartAPI)) return false;
    try {
      const { getCloudCart, setCloudCart } = window.__cartAPI;
      const uid = window.currentUser.uid;
      const local = JSON.parse(localStorage.getItem('cart')||'[]');
      if (!local.length) return true;
      const cloud = await getCloudCart(uid);
      const merged = (window.__cartAPI.mergeCarts || ((a,b)=>[...a,...b]))(cloud, local);
      await setCloudCart(uid, merged);
      localStorage.removeItem('cart');
      return true;
    } catch(e){
      console.warn("syncLocalToCloud failed:", e);
      return false;
    }
  }

  async function addToCart(name, price){
    const item = { name, price };
    // Try cloud first if logged in
    if (window.isLoggedIn && window.currentUser && window.__cartAPI) {
      try {
        const { getCloudCart, setCloudCart } = window.__cartAPI;
        const uid = window.currentUser.uid;
        const existing = await getCloudCart(uid);
        existing.push(item);
        await setCloudCart(uid, existing);
        alert(name + " added to your account cart!");
        return;
      } catch (e) {
        console.warn("Cloud cart add failed, saving local and syncing…", e);
      }
    }
    // Save local, then try to sync to cloud (so cart page shows it)
    const cart = JSON.parse(localStorage.getItem('cart')||'[]');
    cart.push(item);
    localStorage.setItem('cart', JSON.stringify(cart));
    // If logged in, try to push local->cloud now:
    const synced = await syncLocalToCloud();
    alert(name + (synced ? " added to your account cart!" : " added locally (offline)."));
  }

  function imgFallback(el){ el.onerror=null; el.src="https://placehold.co/1200x800/png?text=CustomPC.tech"; }
</script>
<script type="module" src="nav-auth.js"></script>

</body>
</html>
